import{d as b,r as m,o as W,a as h,c as y,b as d,S as D,P as B,W as N,O as P,A as X,C as Y,e as F,f as H,T as j,M as V,g as Z,h as q,i as _,u as K,n as w,j as z,k as J}from"./vendor.9bdfc26c.js";const Q=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}};Q();class ee{static isWebGLAvailable(){try{const s=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(s.getContext("webgl")||s.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const s=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&s.getContext("webgl2"))}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(s){const n={1:"WebGL",2:"WebGL 2"},i={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let e='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const t=document.createElement("div");return t.id="webglmessage",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",i[s]?e=e.replace("$0","graphics card"):e=e.replace("$0","browser"),e=e.replace("$1",n[s]),t.innerHTML=e,t}}var te=(l,s)=>{const n=l.__vccOpts||l;for(const[i,e]of s)n[i]=e;return n};const ne={id:"editor-container"},se=b({props:{design:null,unit:null,side:null},emits:["change"],setup(l,{emit:s}){const n=l,i=m();let e,t;W(()=>{e=i.value,t=e.getContext("2d");const o=document.createElement("img");o.addEventListener("load",()=>{const r=o.width*n.design.sc,a=o.height*n.design.sc;setTimeout(()=>{t.drawImage(o,0,0,r,a),e.style.visibility="visible",c()},1e3),e.width=r,e.height=a}),o.src=n.design.units[n.unit][n.side].image});function c(){const o=n.design.units[n.unit][n.side].parts.reduce((r,a)=>(r[a.id]=u(a).toDataURL(),r),{});s("change",o)}function u(o){const r=o.x*n.design.sc,a=o.y*n.design.sc,g=(o.x+o.w)*n.design.sc,v=(o.y+o.h)*n.design.sc,x=t.getImageData(r,a,g,v),p=document.createElement("canvas");return p.width=g-r,p.height=v-a,p.getContext("2d").putImageData(x,0,0),p}return(o,r)=>(h(),y("div",ne,[d("canvas",{ref_key:"canvasRef",ref:i},null,512)]))}});var ie=te(se,[["__scopeId","data-v-2b4472b9"]]),oe="/assets/image.37dcc529.png";const re=b({props:{designSide:null,textureData:null},setup(l){const s=l,n=m(),i=.00026458333333719,e=new D,t=new B(50,window.innerWidth/window.innerHeight,.1,1e3);t.position.set(0,0,.2);const c=new N;c.setSize(window.innerWidth,window.innerHeight);const u=new P(t,c.domElement),o=new X(16777215);e.background=new Y(15856113),u.enableDamping=!0,u.dampingFactor=.05,u.minDistance=.2,u.maxDistance=.3,e.add(new F(10));function r(){for(;e.children.length>0;)e.remove(e.children[0]);e.add(o),s.designSide.parts.forEach(g=>{const{id:v,w:x,h:p,pc:G}=g,{x:k,y:O,z:S,r:{x:L,y:E,z:C}={}}=G,A=k*i,M=O*i,R=S*i,T=x*i,I=p*i,U=s.textureData[v],$=new j().load(U||oe),f=new V(new Z(T,I),new q({map:$}));f.position.set(A,M,R),L&&f.rotateX(_.degToRad(L)),E&&f.rotateY(_.degToRad(E)),C&&f.rotateZ(_.degToRad(C)),e.add(f)})}function a(){requestAnimationFrame(a),u.update(),c.render(e,t)}return W(()=>{n.value.appendChild(c.domElement),a()}),H(()=>{r(),a()}),(g,v)=>(h(),y("div",{ref_key:"previewContainerRef",ref:n},null,512))}});var ae="/assets/box1.d559976e.png";const ce={key:0,class:"webgl-unavailable"},de={key:1,class:"main"},le=d("div",{class:"header"},[d("h1",null,"BOX-R DESIGN")],-1),ue={class:"body"},ge={class:"footer"},pe={class:"mode"},me=b({setup(l){const s=ee.isWebGLAvailable(),n={sc:.9,units:[{outside:{image:ae,parts:[{id:201,x:50,y:65,w:305,h:150,pc:{x:0,y:200,z:-75,r:{x:-90}},po:{x:0,y:0,z:0},t0:"SOUT"},{id:202,x:50,y:213,w:305,h:400,pc:{x:0,y:0,z:0},po:{x:0,y:0,z:0},t0:"SOUT"},{id:203,x:355,y:215,w:150,h:400,pc:{x:152.5,y:0,z:-75,r:{y:90}},po:{x:0,y:0,z:0},t0:"SOUT"},{id:204,x:510,y:217,w:305,h:400,pc:{x:0,y:0,z:-150,r:{y:180}},po:{x:0,y:0,z:0},t0:"SOUT"},{id:205,x:815,y:215,w:150,h:400,pc:{x:-152.5,y:0,z:-75,r:{y:-90}},po:{x:0,y:0,z:0},t0:"SOUT"},{id:206,x:510,y:610,w:305,h:150,pc:{x:0,y:-200,z:-75,r:{x:90}},po:{x:0,y:0,z:0},t0:"SOUT"}]},inside:{image:"",parts:[]}}]},i=m("design"),e=m(0),t=m("outside"),c=m({});function u(o){c.value=o}return(o,r)=>K(s)?(h(),y("div",de,[le,d("div",ue,[d("div",{class:"design-view",style:w({zIndex:i.value==="design"?1:-1})},[z(ie,{design:n,unit:e.value,side:t.value,onChange:r[0]||(r[0]=a=>u(a))},null,8,["unit","side"])],4),d("div",{class:"preview-view",style:w({zIndex:i.value==="preview"?1:-1})},[z(re,{"design-side":n.units[e.value][t.value],"texture-data":c.value},null,8,["design-side","texture-data"])],4)]),d("div",ge,[d("div",pe,[d("button",{onClick:r[1]||(r[1]=a=>i.value="design"),style:w({background:i.value==="design"?"#ddd":"#fff"})},"Design",4),d("button",{onClick:r[2]||(r[2]=a=>i.value="preview"),style:w({background:i.value==="preview"?"#ddd":"#fff"})},"Preview",4)])])])):(h(),y("div",ce,"No WebGL available!"))}});J(me).mount("#app");
