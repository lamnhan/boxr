var f=Object.defineProperty;var h=(r,e,o)=>e in r?f(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o;var l=(r,e,o)=>(h(r,typeof e!="symbol"?e+"":e,o),o);import{d as y,r as b,u as _,o as d,c as g,a as v,b as w,e as L,S as E,f as W}from"./vendor.b180a6e1.js";const R=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}};R();class G{static isWebGLAvailable(){try{const e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const e=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&e.getContext("webgl2"))}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(e){const o={1:"WebGL",2:"WebGL 2"},s={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let t='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const n=document.createElement("div");return n.id="webglmessage",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0",s[e]?t=t.replace("$0","graphics card"):t=t.replace("$0","browser"),t=t.replace("$1",o[e]),n.innerHTML=t,n}}const D={key:0,class:"webgl-unavailable"},P={key:1,class:"page-container"},x=y({setup(r){const e=G.isWebGLAvailable();return(o,s)=>{const t=b("router-view");return _(e)?(d(),g("div",P,[v(t)])):(d(),g("div",D,"No WebGL available!"))}}}),A="modulepreload",u={},C="/",m=function(e,o){return!o||o.length===0?e():Promise.all(o.map(s=>{if(s=`${C}${s}`,s in u)return;u[s]=!0;const t=s.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const i=document.createElement("link");if(i.rel=t?"stylesheet":A,t||(i.as="script",i.crossOrigin=""),i.href=s,document.head.appendChild(i),t)return new Promise((a,p)=>{i.addEventListener("load",a),i.addEventListener("error",p)})})).then(()=>e())},$=[{path:"/",name:"home",component:()=>m(()=>import("./home.page.7835acfb.js"),["assets/home.page.7835acfb.js","assets/home.page.60ecbe18.css","assets/vendor.b180a6e1.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/edit/:iid",name:"editor",component:()=>m(()=>import("./editor.page.e42f3862.js"),["assets/editor.page.e42f3862.js","assets/editor.page.5990f4b2.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.b180a6e1.js"])}],k=w({history:L(),routes:$});class S{constructor(){l(this,"baseUrl","/mocked-api")}getJson(e){return fetch(`${this.baseUrl}/${e}`).then(o=>o.json())}}const c=new S,j=new E({state:{categories:[],templateRecord:{},materialRecord:{},editingDesign:null,editingData:null},actions:{async loadCategoriesAndTemplates({state:r}){await(r.categories.length?Promise.resolve():c.getJson("categories.json").then(s=>(r.categories=s,Promise.all(r.categories.map(async t=>{const n=await c.getJson(`templates/${t.slug}.json`);return{categoryId:t.id,templates:n}})))).then(s=>(r.templateRecord=s.reduce((t,n)=>(t[n.categoryId]=n.templates,t),{}),Promise.resolve())));const{categories:e,templateRecord:o}=r;return{categories:e,templateRecord:o}},async loadMaterials({state:r},e){return await(r.materialRecord[e.id]?Promise.resolve():c.getJson("materials/all.json").then(o=>(r.materialRecord[e.id]=o,Promise.resolve()))),r.materialRecord[e.id]},createDesign({state:r},e){return r.editingDesign=e,new Promise(o=>setTimeout(()=>o(e),300))},async loadEditingData({state:r},e){await(r.editingDesign&&r.editingDesign.id===e,Promise.resolve());const o=r.categories.find(a=>a.id===r.editingDesign.category_id),s=r.templateRecord[o.id].find(a=>a.id===r.editingDesign.template_id),t=r.materialRecord[s.id].find(a=>a.id===r.editingDesign.material_id);r.editingData={category:o,template:s,material:t};const{editingDesign:n,editingData:i}=r;return{editingDesign:n,editingData:i}}}});W(x).use(k).use(j).mount("#app");export{k as r,j as s};
