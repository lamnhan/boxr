var x=Object.defineProperty,m=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ss=Object.prototype.hasOwnProperty,os=Object.prototype.propertyIsEnumerable;var L=(a,i,n)=>i in a?x(a,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[i]=n,U=(a,i)=>{for(var n in i||(i={}))ss.call(i,n)&&L(a,n,i[n]);if(E)for(var n of E(i))os.call(i,n)&&L(a,n,i[n]);return a},X=(a,i)=>m(a,I(i));import{d as ls,g as C,h as M,o as e,c as t,i as s,F as k,j as S,u as j,p as es,k as ts,t as h,n as z,l as $,w as g,m as O,q as is}from"./vendor.128118c4.js";import{s as y,r as as}from"./index.13915b67.js";import{_ as ns}from"./plugin-vue_export-helper.21dcd24c.js";const T=a=>(es("data-v-f7786a72"),a=a(),ts(),a),cs=T(()=>s("div",{class:"header"},[s("h1",null,"BOX-R")],-1)),ds={class:"main"},rs={class:"category-list"},us={class:"category-head"},_s=["src","alt"],vs={class:"template-list"},hs=["onClick"],fs={class:"info"},ps={class:"thumbnail"},ks=["src","alt"],gs={class:"content"},ys=is("Size: "),bs={class:"price"},Cs={key:0},Ss=T(()=>s("em",null,"\u20AB",-1)),$s={key:0,class:"detail"},Os={class:"links"},Ts={key:0,class:"start-from-scratch"},Ds={class:"selectors"},ws={class:"material-selection"},Ms=T(()=>s("h5",null,"Select material",-1)),js={class:"material-list"},zs=["onClick"],Bs={class:"thumbnail"},Rs={class:"content"},Fs={key:0,class:"price"},Ns={class:"color-selection"},Vs=T(()=>s("h5",null,"Select color",-1)),As={key:0,class:"material-name"},qs={class:"color-list"},Es=["onClick"],Ls={key:1,class:"no-color"},Us={class:"actions"},Xs={key:1,class:"choose-a-design"},Gs=T(()=>s("p",null,"TODO: ...",-1)),Hs=[Gs],Js=ls({setup(a){const i=C("blank"),n=C(null),p=C(null),u=C(null),c=C(null),G=M(()=>y.state.categories),B=M(()=>y.state.materialRecord),H=M(()=>y.state.templateRecord);function J(r){as.push({name:"editor",params:{iid:`${r.slug}-${r.id}`}})}function K(){var l;if(!n.value||!p.value||!u.value||!((l=c.value)==null?void 0:l.front))return;const r={id:Math.floor(Math.random()*1e3),slug:"untitled-design",title:"Untitled design",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),template_id:p.value.id,category_id:n.value.id,material_id:u.value.id,design_data:{colors:c.value}};y.dispatch("createDesign",r).then(()=>J(r))}async function P(r,l){n.value=r,p.value=l,await y.dispatch("loadMaterials",l),R(B.value[l.id].find(_=>_.id===l.default_material_id))}function R(r){c.value=null,u.value=r,c.value=Object.keys(u.value.textures).reduce((l,_)=>(l[_]=u.value.textures[_].colors[0],l),{})}function Q(r,l){c.value=X(U({},c.value),{[r]:l})}function W(){alert("TODO: choose custom color ...")}return y.dispatch("loadCategoriesAndTemplates"),(r,l)=>(e(),t(k,null,[cs,s("div",ds,[s("ul",rs,[(e(!0),t(k,null,S(j(G),(_,Y)=>(e(),t("li",{key:Y},[s("h2",us,[s("img",{src:_.thumbnail,alt:_.title},null,8,_s),s("strong",null,h(_.title),1)]),s("ul",vs,[(e(!0),t(k,null,S(j(H)[_.id],(d,Z)=>{var F,N;return e(),t("li",{key:Z,onClick:o=>{var v;return d.id===((v=p.value)==null?void 0:v.id)?!1:P(_,d)},class:z({active:d.id===((F=p.value)==null?void 0:F.id)})},[s("div",fs,[s("div",ps,[s("img",{src:d.thumbnail,alt:d.title},null,8,ks)]),s("div",gs,[s("h3",null,h(d.title),1),s("p",null,[ys,s("strong",null,h(d.display_size),1)])]),s("div",bs,[d.sale_off?(e(),t("span",Cs,"-"+h(d.sale_off)+" off",1)):$("",!0),s("strong",null,h(d.base_price-d.sale_off),1),Ss])]),d.id===((N=p.value)==null?void 0:N.id)?(e(),t("div",$s,[s("div",Os,[s("h4",{onClick:l[0]||(l[0]=g(o=>i.value="blank",["prevent"])),style:O({opacity:i.value==="blank"?1:.5})},"Start from scratch",4),s("h4",{onClick:l[1]||(l[1]=g(o=>i.value="ready",["prevent"])),style:O({opacity:i.value==="ready"?1:.5})},"Choose a design",4)]),i.value==="blank"?(e(),t("div",Ts,[s("div",Ds,[s("div",ws,[Ms,s("ul",js,[(e(!0),t(k,null,S(j(B)[d.id],(o,v)=>{var f,D,b,w,V,A,q;return e(),t("li",{key:v,class:z({active:((f=u.value)==null?void 0:f.id)===o.id}),onClick:g(Ks=>R(o),["stop"])},[s("div",Bs,[s("em",{class:"color-front",style:O({background:((D=u.value)==null?void 0:D.id)===o.id&&((b=c.value)==null?void 0:b.front)?c.value.front:o.textures.front.colors[0]})},null,4),s("em",{class:"color-back",style:O({background:((w=u.value)==null?void 0:w.id)===o.id&&(((V=c.value)==null?void 0:V.back)||((A=c.value)==null?void 0:A.front))?c.value.back||c.value.front:((q=o.textures.back)==null?void 0:q.colors[0])||o.textures.front.colors[0]})},null,4)]),s("div",Rs,[s("h6",null,h(o.title),1)]),o.offset_price?(e(),t("div",Fs,"+"+h(o.offset_price),1)):$("",!0)],10,zs)}),128))])]),s("div",Ns,[Vs,u.value&&u.value.textures.front.colors.length>1?(e(!0),t(k,{key:0},S(u.value.textures,(o,v)=>(e(),t("div",{key:v},[(o==null?void 0:o.title)?(e(),t("div",As,h(o.title),1)):$("",!0),s("ul",qs,[(e(!0),t(k,null,S(o==null?void 0:o.colors,(f,D)=>{var b;return e(),t("li",{key:D,class:z({active:((b=c.value)==null?void 0:b[v])===f}),onClick:g(w=>Q(v,f),["stop"])},[s("h6",{class:"thumbnail",style:O({background:f})},null,4)],10,Es)}),128)),(o==null?void 0:o.customizable)?(e(),t("li",{key:0,class:"choose-custom",onClick:l[2]||(l[2]=g(f=>W(),["stop"]))},"(+)")):$("",!0)])]))),128)):(e(),t("p",Ls,"This material doesn't support custom background color!"))])]),s("div",Us,[s("button",{onClick:l[3]||(l[3]=g(o=>K(),["stop"]))},"Start editing")])])):(e(),t("div",Xs,Hs))])):$("",!0)],10,hs)}),128))])]))),128))])])],64))}});var Zs=ns(Js,[["__scopeId","data-v-f7786a72"]]);export{Zs as default};
