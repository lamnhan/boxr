var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var c=(t,e,n)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l=(t,e)=>{for(var n in e||(e={}))b.call(e,n)&&c(t,n,e[n]);if(g)for(var n of g(e))v.call(e,n)&&c(t,n,e[n]);return t};var u=(t,e,n)=>(c(t,typeof e!="symbol"?e+"":e,n),n);import{d as w,r as L,u as E,o as m,c as p,a as D,b as W,e as R,S as G,f as P}from"./vendor.10c8995a.js";const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};x();class A{static isWebGLAvailable(){try{const e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const e=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&e.getContext("webgl2"))}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(e){const n={1:"WebGL",2:"WebGL 2"},i={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let r='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const o=document.createElement("div");return o.id="webglmessage",o.style.fontFamily="monospace",o.style.fontSize="13px",o.style.fontWeight="normal",o.style.textAlign="center",o.style.background="#fff",o.style.color="#000",o.style.padding="1.5em",o.style.width="400px",o.style.margin="5em auto 0",i[e]?r=r.replace("$0","graphics card"):r=r.replace("$0","browser"),r=r.replace("$1",n[e]),o.innerHTML=r,o}}const C={key:0,class:"webgl-unavailable"},$={key:1,class:"page-container"},k=w({setup(t){const e=A.isWebGLAvailable();return(n,i)=>{const r=L("router-view");return E(e)?(m(),p("div",$,[D(r)])):(m(),p("div",C,"No WebGL available!"))}}}),S="modulepreload",f={},j="/",h=function(e,n){return!n||n.length===0?e():Promise.all(n.map(i=>{if(i=`${j}${i}`,i in f)return;f[i]=!0;const r=i.endsWith(".css"),o=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":S,r||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),r)return new Promise((a,y)=>{s.addEventListener("load",a),s.addEventListener("error",y)})})).then(()=>e())},I=[{path:"/",name:"home",component:()=>h(()=>import("./home.page.71ac8d7c.js"),["assets/home.page.71ac8d7c.js","assets/home.page.221a8d31.css","assets/vendor.10c8995a.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/edit/:iid",name:"editor",component:()=>h(()=>import("./editor.page.20a4969c.js"),["assets/editor.page.20a4969c.js","assets/editor.page.7748a384.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.10c8995a.js"])}],M=W({history:R(),routes:I});class O{constructor(){u(this,"baseUrl","/mocked-api")}getJson(e){return fetch(`${this.baseUrl}/${e}`).then(n=>n.json())}}const d=new O,B=new G({state:{categories:[],templateRecord:{},materialRecord:{},editingDesign:null,editingData:null},actions:{async loadCategoriesAndTemplates({state:t}){await(t.categories.length?Promise.resolve():d.getJson("categories.json").then(i=>(t.categories=i,Promise.all(t.categories.map(async r=>{const o=await d.getJson(`templates/${r.slug}.json`);return{categoryId:r.id,templates:o}})))).then(i=>(t.templateRecord=i.reduce((r,o)=>(r[o.categoryId]=o.templates,r),{}),Promise.resolve())));const{categories:e,templateRecord:n}=t;return{categories:e,templateRecord:n}},async loadMaterials({state:t},e){return await(t.materialRecord[e.id]?Promise.resolve():d.getJson("materials/all.json").then(n=>(t.materialRecord[e.id]=n,Promise.resolve()))),t.materialRecord[e.id]},createDesign({state:t},e){return t.editingDesign=e,new Promise(n=>setTimeout(()=>n(e),300))},updateDesignData({state:t},{side:e,data:n}){const i=t.editingDesign;return i.design_data[e]=l(l({},i.design_data[e]),n),t.editingDesign=i},async loadEditingData({state:t},e){await(t.editingDesign&&t.editingDesign.id===e,Promise.resolve());const n=t.categories.find(a=>a.id===t.editingDesign.category_id),i=t.templateRecord[n.id].find(a=>a.id===t.editingDesign.template_id),r=t.materialRecord[i.id].find(a=>a.id===t.editingDesign.material_id);t.editingData={category:n,template:i,material:r};const{editingDesign:o,editingData:s}=t;return{editingDesign:o,editingData:s}}}});P(k).use(M).use(B).mount("#app");export{M as r,B as s};
