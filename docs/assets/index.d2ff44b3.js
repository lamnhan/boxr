var _=Object.defineProperty;var g=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var c=(t,e,r)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,l=(t,e)=>{for(var r in e||(e={}))b.call(e,r)&&c(t,r,e[r]);if(g)for(var r of g(e))v.call(e,r)&&c(t,r,e[r]);return t};var u=(t,e,r)=>(c(t,typeof e!="symbol"?e+"":e,r),r);import{d as w,r as L,u as E,o as m,c as p,a as D,b as W,e as R,S as G,f as P}from"./vendor.51d93dd3.js";const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};x();class A{static isWebGLAvailable(){try{const e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch{return!1}}static isWebGL2Available(){try{const e=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&e.getContext("webgl2"))}catch{return!1}}static getWebGLErrorMessage(){return this.getErrorMessage(1)}static getWebGL2ErrorMessage(){return this.getErrorMessage(2)}static getErrorMessage(e){const r={1:"WebGL",2:"WebGL 2"},i={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext};let n='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>';const o=document.createElement("div");return o.id="webglmessage",o.style.fontFamily="monospace",o.style.fontSize="13px",o.style.fontWeight="normal",o.style.textAlign="center",o.style.background="#fff",o.style.color="#000",o.style.padding="1.5em",o.style.width="400px",o.style.margin="5em auto 0",i[e]?n=n.replace("$0","graphics card"):n=n.replace("$0","browser"),n=n.replace("$1",r[e]),o.innerHTML=n,o}}const C={key:0,class:"webgl-unavailable"},I={key:1,class:"page-container"},$=w({setup(t){const e=A.isWebGLAvailable();return(r,i)=>{const n=L("router-view");return E(e)?(m(),p("div",I,[D(n)])):(m(),p("div",C,"No WebGL available!"))}}}),k="modulepreload",f={},S="/",h=function(e,r){return!r||r.length===0?e():Promise.all(r.map(i=>{if(i=`${S}${i}`,i in f)return;f[i]=!0;const n=i.endsWith(".css"),o=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":k,n||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),n)return new Promise((a,y)=>{s.addEventListener("load",a),s.addEventListener("error",y)})})).then(()=>e())},j=[{path:"/",name:"home",component:()=>h(()=>import("./home.page.7ec69628.js"),["assets/home.page.7ec69628.js","assets/home.page.d15a4d24.css","assets/vendor.51d93dd3.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/edit/:iid",name:"editor",component:()=>h(()=>import("./editor.page.7df14046.js").then(function(t){return t.e}),["assets/editor.page.7df14046.js","assets/editor.page.6bf51c5e.css","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.51d93dd3.js"])}],M=W({history:R(),routes:j});class O{constructor(){u(this,"baseUrl","/mocked-api")}getJson(e){return fetch(`${this.baseUrl}/${e}`).then(r=>r.json())}}const d=new O,U=new G({state:{categories:[],templateRecord:{},materialRecord:{},lastSaved:null,editingUnitId:1,editingDesign:null,editingData:null},actions:{async loadCategoriesAndTemplates({state:t}){await(t.categories.length?Promise.resolve():d.getJson("categories.json").then(i=>(t.categories=i,Promise.all(t.categories.map(async n=>{const o=await d.getJson(`templates/${n.slug}.json`);return{categoryId:n.id,templates:o}})))).then(i=>(t.templateRecord=i.reduce((n,o)=>(n[o.categoryId]=o.templates,n),{}),Promise.resolve())));const{categories:e,templateRecord:r}=t;return{categories:e,templateRecord:r}},async loadMaterials({state:t},e){return await(t.materialRecord[e.id]?Promise.resolve():d.getJson("materials/all.json").then(r=>(t.materialRecord[e.id]=r,Promise.resolve()))),t.materialRecord[e.id]},async loadEditing({state:t},e){await(t.editingDesign&&t.editingDesign.id===e,Promise.resolve());const r=t.categories.find(a=>a.id===t.editingDesign.category_id),i=t.templateRecord[r.id].find(a=>a.id===t.editingDesign.template_id),n=t.materialRecord[i.id].find(a=>a.id===t.editingDesign.material_id);t.editingData={category:r,template:i,material:n};const{editingDesign:o,editingData:s}=t;return{editingDesign:o,editingData:s}},createDesign({state:t},e){return t.editingDesign=e,new Promise(r=>setTimeout(()=>r(e),300))},updateDesign({state:t},{side:e,data:r}){const i=t.editingUnitId,n=t.editingDesign;return n.design_data[i][e]=l(l({},n.design_data[i][e]),r),t.editingDesign=n},updateUnitId({state:t},e){return t.editingUnitId=e},updateLastSaved({state:t}){return t.lastSaved=new Date}}});P($).use(M).use(U).mount("#app");export{M as r,U as s};
